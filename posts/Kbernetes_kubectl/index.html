<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="[Kubernetes] Kubernetes - Kubectl 명령어" /><meta name="author" content="동글 Donggeul" /><meta property="og:locale" content="en" /><meta name="description" content="Kubernetes Kubectl 명령어" /><meta property="og:description" content="Kubernetes Kubectl 명령어" /><link rel="canonical" href="https://donggeuldunggeul.github.io//posts/Kbernetes_kubectl/" /><meta property="og:url" content="https://donggeuldunggeul.github.io//posts/Kbernetes_kubectl/" /><meta property="og:site_name" content="동글둥글 DonggeulDunggeul" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-07-27T00:00:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="[Kubernetes] Kubernetes - Kubectl 명령어" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"동글 Donggeul"},"dateModified":"2022-07-27T00:00:00+09:00","datePublished":"2022-07-27T00:00:00+09:00","description":"Kubernetes Kubectl 명령어","headline":"[Kubernetes] Kubernetes - Kubectl 명령어","mainEntityOfPage":{"@type":"WebPage","@id":"https://donggeuldunggeul.github.io//posts/Kbernetes_kubectl/"},"url":"https://donggeuldunggeul.github.io//posts/Kbernetes_kubectl/"}</script><title>[Kubernetes] Kubernetes - Kubectl 명령어 | 동글둥글 DonggeulDunggeul</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="동글둥글 DonggeulDunggeul"><meta name="application-name" content="동글둥글 DonggeulDunggeul"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="/assets/img/avatar/avatar.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">동글둥글 DonggeulDunggeul</a></div><div class="site-subtitle font-italic">우리는 짱 멋진 개발자</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/DonggeulDunggeul" target="_blank"> <i class="fab fa-github"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>[Kubernetes] Kubernetes - Kubectl 명령어</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>[Kubernetes] Kubernetes - Kubectl 명령어</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1658847600" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Jul 27, 2022 </em> </span> <span> Updated <em class="" data-ts="1658880000" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Jul 27, 2022 </em> </span><div class="d-flex justify-content-between"> <span> By <em> 동글 Donggeul </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2497 words"> <em>13 min</em> read</span></div></div></div><div class="post-content"><p>참고: <a href="https://kubernetes.io/ko/docs/reference/kubectl/">Kubernetes 레퍼런스 - 명령줄 도구 (Kubectl)</a>, ORELLY 쿠버네티스 시작하기</p><h2 id="1-kubectl"><span class="mr-2">1. Kubectl</span><a href="#1-kubectl" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Kubectl은 쿠버네티스 API와 상호작용하기 위한 커맨드라인 도구입니다.<br /> Kubectl을 사용해 Pod, ReplicaSet 등 대부분의 쿠버네티스 객체를 관리하고, 클러스터의 전반적인 상태를 탐색하고 확인할 수 있습니다.</p><p> </p><h3 id="11-클러스터-상태-확인"><span class="mr-2">1.1 클러스터 상태 확인</span><a href="#11-클러스터-상태-확인" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><blockquote><p><strong>참고) 쿠버네티스 클러스터란?</strong></p><p><img data-src="https://user-images.githubusercontent.com/109357459/181258364-73597659-418b-4dc5-844c-e8a3f5b16813.jpg" alt="그림1" data-proofer-ignore> 컨테이너화 된 어플리케이션을 실행하는 워커노드의 집합</p></blockquote><p> </p><p><strong>1.1.1 클러스터 버전 확인</strong><br /> 쿠버네티스 API, kubectl 버전 확인이 가능합니다.</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>$ kubectl version
</pre></table></code></div></div><p><strong>1.1.2 클러스터 진단</strong><br /> 클러스터를 구성하는 <a href="https://kubernetes.io/ko/docs/concepts/overview/components/#%EC%BB%A8%ED%8A%B8%EB%A1%A4-%ED%94%8C%EB%A0%88%EC%9D%B8-%EC%BB%B4%ED%8F%AC%EB%84%8C%ED%8A%B8">컴포넌트</a>들과 클러스터의 상태를 확인 할 수 있습니다.</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>$ kubectl get componentstatuses
</pre></table></code></div></div><blockquote><p><strong>참고) 쿠버네티스 컴포넌트</strong></p><p><strong>컨트롤 플레인(control Plane) 컴포넌트</strong></p><ul><li><p><strong>kube-apiserver</strong> : 쿠버네티스 클러스터로 들어오는 요청(kubectl 명령 등)을 가장 앞에서 전송받아 요청의 처리 흐름에 따라 적절한 컴포넌트로 요청을 전달</p><li><p><strong>etcd</strong> : 쿠버네티스 클러스터가 동작하기 위해 필요한 클러스터 및 리소스의 구성정보, 상태 정보 등을 키-값(key-value)형태로 저장하는 저장소</p><li><p><strong>kube-scheduler</strong> : 새로 생성된 파드(기본적인 작업단위)를 감지하여 어떤 노드로 배치할지 결정하는 작업인 스케줄링을 담당</p><li><p><strong>kube-controller-manager</strong> : kube-controller-manager는 다운된 노드가 없는지, 파드가 의도한 복제(Replicas) 숫자를 유지하고 있는지, 서비스와 파드는 적절하게 연결되어 있는지, 네임스페이스에 대한 기본 계정과 토큰이 생성되어 있는지를 확인하고 적절하지 않다면 적절한 수준을 유지하기 위해 조치하는 역할</p></ul><p><strong>노드(Node) 컴포넌트</strong></p><ul><li><p><strong>kubelet</strong> : 노드에서 컨테이너가 동작하도록 관리해주는 핵심 요소로 쿠버네티스 파드를 관리하기위해 작성한 YAML을 kubectl 명령어로 적용하면, kubelet은 YAML을 통해 전달된 파드를 생성, 변경하고 YAML에 명시된 컨테이너가 정상적으로 실행되고 있는지 확인</p><li><p><strong>kube-proxy</strong> : 쿠버네티스 클러스터 내부에서 네트워크 요청을 전달하는 역할로 파드의 IP는 매번 변하지만 kube-proxy가 파드에 접근할 수 있는 방법을 그때마다 관리하고 갱신하며, 서비스 오브젝트는 이 정보를 사용하여 파드가 외부에서 접근할 수 있는 경로를 제공</p><li><p><strong><a href="https://kubernetes.io/ko/docs/setup/production-environment/container-runtimes/">container runtime</a></strong> : 쿠버네티스가 컨테이너를 제어하기 위해 제공하는 표준 규약인 컨테이너 런타임 인터페이스(<strong>CRI</strong>)를 준수하여 쿠버네티스와 함께 사용할 수 있는 외부 애플리케이션들을 의미</p></ul><p><em><strong>CRI?</strong> : 기본적으로 쿠버네티스는 파드 관리의 역할을 하는 kubelet이 명령을 받으면 도커 런타임을 통해 컨테이너가 생성되거나 되는데 쿠버네티스 내 컨테이너 기술로 도커 이외의 것들도 사용되다보니 컨테이너 런타임에 대한 이슈가 생겼고 해당 컨테이너 런타임마다 kubelet을 수정해야 하는 문제가 생겼다. 그래서 kubelet과 컨테이너 런타임과의 표준을 정하게 되었는데 이것이 CRI(Container Runtime Interface)이다.</em></p></blockquote><p> </p><h3 id="12-쿠버네티스-워커-노드-조회"><span class="mr-2">1.2 쿠버네티스 워커 노드 조회</span><a href="#12-쿠버네티스-워커-노드-조회" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p> </p><p><strong>1.2.1 노드 목록 조회</strong><br /> 쿠버네티스 클러스터의 모든 노드 목록을 조회할 수 있습니다.</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>$ kubectl get nodes
</pre></table></code></div></div><blockquote><p>쿠버네티스에서 노드는 API 서버 스케줄러 등과 같이 클러스터를 관리하는 master 노드와 컨테이너가 실행되는 worker 노드로 구분되며, 사용자 작업부하(workload)가 클러스터 전체 운영에 영향을 주지 않도록 master 노드에 스케줄링을 수행하지 않는다.</p></blockquote><p><strong>1.2.2 노드 상세정보 조회</strong><br /> 특정 노드에 대한 상세 정보를 조회할 수 있습니다.</p><ul><li>실행중인 도커, 쿠버네티스, 리눅스 커널 등 노드에 위치한 소프트웨어 정보<li>노드상에 위치한 파드 정보<li>요청된 전체 리소스<li>각 파드가 노드에 요청하는 CPU 및 메모리 정보</ul><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>$ kubectl describe nodes {node name}
</pre></table></code></div></div><p> </p><h3 id="13-공통-kubectl-커맨드"><span class="mr-2">1.3 공통 kubectl 커맨드</span><a href="#13-공통-kubectl-커맨드" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p> </p><p><strong>1.3.1 네임 스페이스(namespace)</strong><br /> 네임스페이스는 객체들의 집합을 담고있는 폴더로 쿠버네티스의 클러스터 객체들을 관리하기 위해 사용합니다.</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>// 특정 namespace 참조
$ kubectl {command} --namespace={namespace}
</pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>// 모든 namespace 참조
$ kubectl {command} --all-namespaces
</pre></table></code></div></div><blockquote><p><strong>참고) 초기 네임스페이스</strong></p><ul><li><p><strong>default</strong> : 기본 네임스페이스</p><li><p><strong>kube-system</strong> : 쿠버네티스 시스템에서 생성한 오브젝트를 위한 네임스페이스</p><li><p><strong>kube-public</strong> : 모든 사용자(인증받지 않은 사용자도 포함)가 읽기 권한으로 접근할 수 있으며, 관례적으로 만들어져 있지만 아무 리소스도 없고, 꼭 사용해야하는 것은 아니다.</p><li><p><strong>kube-node-lease</strong> : kubernetes node의 가용성을 체크하기 위한 네임스페이스</p></ul></blockquote><p> </p><p><strong>1.3.2 컨텍스트(context)</strong><br /> 기본 네임스페이스를 영구적으로 변경하고 싶다면, 사용할 수 있습니다.</p><blockquote><p><em>Config 파일을 이용하여 여러 개의 클러스터에 쉽게 접근할 수 있도록 하는 것으로 주로 $HOME/.kube/config 경로에 존재하는 kubectl config 파일에 클러스터를 찾고 인증하는 방법등이 기록되어있다.</em></p></blockquote><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>// 기본 네임스페이스를 가진 새로운 context 생성
$ kubectl config set-context {context name} -namespace={namespace}
</pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>// 생성한 context 사용
$ kubectl config user-context {context name}
</pre></table></code></div></div><p> </p><p><strong>1.3.3 쿠버네티스 객체 조회</strong><br /> 쿠버네티스 객체는 고유의 HTTP 경로에 존재하며, kubectl 커맨드는 해당 경로에 존재하는 쿠버네티스 객체에 접근하기 위해 HTTP 요청을 보냅니다.</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre>// 특정 pod 객체 조회
$ kubectl get pods {pod name} --o

// 전체 pod 조회
$ kubectl get pods
</pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>// 특정 객체 상세정보 조회
$ kubectl describe {resource name} {객체 name}
</pre></table></code></div></div><blockquote><p><strong>-o</strong> 플래그를 추가하면 객체의 좀더 많은 정보를 확인할 수 있다.</p></blockquote><p> </p><p><strong>1.3.4 쿠버네티스 객체 생성, 수정, 삭제</strong><br /> 쿠버네티스 객체들은 JSON 또는 YAML 파일로 표현되며 해당 파일들을 사용해 쿠버네티스 서버에 객체를 생성, 수정, 삭제 할 수 있습니다.</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>// 객체 생성
$ kubectl apply -f {yaml}
$ kubectl create -f {yaml}
</pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>// 객체 수정 - 기존 객체와 다른 부분만 수정
$ kubectl apply -f {yaml}
</pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>// 대화식 편집 - 객체의 최신 상태를 내려받고 정의되어 있는 상태 편집
$ kubectl edit {resource name} {객체 name}
</pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>// 이전 이력 기록
$ kubectl apply -f {yaml} view-last-applied
</pre></table></code></div></div><blockquote><p><strong><em>apply 커맨드는 애노테이션(annotation)을 사용해 이전 config 이력을 객체안에 기록할 수 있다.</em></strong></p><ul><li><p><strong>edit-last-applied</strong> : 마지막 변경 상태</p><li><p><strong>set-last-applied</strong> : 마지막 적용된 설정</p><li><p><strong>view-last-applied</strong> : 마지막 적용된 상태</p></ul></blockquote><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>// 객체 삭제  
$ kubectl delete -f {yaml}
$ kubectl delete {resource name} {객체 name}
</pre></table></code></div></div><p> </p><p><strong>1.3.5 쿠버네티스 객체 라벨링</strong><br /> 라벨은 쿠버네티스 클러스터에서 객체를 식별하고 선택적으로 그룹화 하는데 사용됩니다.</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>// 라벨 추가 - 라벨은 "key=value"의 형태
$ kubectl label pods {pod name} {label}
</pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>// 라벨 덮어쓰기
$ kubectl label pods {pod name} {label} --overwrite
</pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>//라벨 삭제
$ kubectl label pods {pod name} {label key}-
</pre></table></code></div></div><p> </p><p><strong>1.3.6 쿠버네티스 디버깅 커맨드</strong><br /> $ kubectl 은 디버깅 할 수 있도록 여러가지 커맨드를 제공합니다.</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre>// 현재 동작중인 컨테이너 로그 확인
$ kubectl logs {pod name}

// pod 안에 여러 컨테이너가 있을 경우
$ kubectl logs {pod name} -c {container}
</pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>// 현재 실행중인 컨테이너에 커맨드 실행 - 좀 더 자세한 디버깅을 수행할 수 있도록 대화형 셸 제공
$ kubectl exec -it {pod name} --bash
</pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>// 실행 중인 프로세스에 접근하여 프로세스에 입력값을 보낼 수 있다.

$ kubectl attach -it {pod name}
</pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre>// 컨테이너에 파일 붙혀넣기, 가져오기

// 컨테이너 - 로컬
$ kubectl cp {pod name}:{path/to/remote/file} {path/to/local/file}

// 로컬 - 컨테이너
$ kubectl cp {path/to/local/file} {pod name}:{path/to/remote/file}
</pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>// 네트워크를 통해 파드에 접근 - local port에서 container port로 트래픽을 전달하는 연결 생성
$ kubectl port-forward {pod name} {local port}:{container port}
</pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre>// 클러스터의 리소스 사용 현황

// 절대 단위(코어), 가용 리소스의 백분율(전테 코어 수)을 사용해 노드들의 CPU 및 메모리 사용량을 보여준다.
$ kubectl top nodes

// 모든 파드의 목록 및 리소스 사용량을 보여준다. - "--all-namespaces" 플래그를 추가하면 클러스터 내 모든 파드의 리소스 사용량을 확인할 수 있다. 
$ kubectl top pods
</pre></table></code></div></div><p> </p><p><strong>1.3.7 kubectl 도움말</strong></p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>$ kubectl help

$ kubectl help {command name}
</pre></table></code></div></div></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/kubernetes/'>Kubernetes</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/kubernetes/" class="post-tag no-text-decoration" >Kubernetes</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/Java_%EB%AC%B8%EC%9E%90%EC%97%B4(String)_%EB%B9%84%EA%B5%90%ED%95%98%EB%8A%94_%EB%B0%A9%EB%B2%95/">[Java] 문자열(String)을 비교하는 방법 (==, equals, compare)</a><li><a href="/posts/AWS-SES(Simple_Email_Service)/">[AWS] Amazon SES - 2022년 바뀐 UI위에서</a><li><a href="/posts/Java%EC%9E%85%EB%AC%B8_%ED%81%B4%EB%9E%98%EC%8A%A4/">[Java] Java 입문 - 클래스</a><li><a href="/posts/SQL_VS_ORM/">[용어정리] SQL VS ORM</a><li><a href="/posts/grafana_logout_api_python/">[Reference & Error] Grafana logout API(Python)</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/java/">Java</a> <a class="post-tag" href="/tags/keycloak/">Keycloak</a> <a class="post-tag" href="/tags/kubernetes/">Kubernetes</a> <a class="post-tag" href="/tags/monitoring/">Monitoring</a> <a class="post-tag" href="/tags/python/">Python</a> <a class="post-tag" href="/tags/aws/">AWS</a> <a class="post-tag" href="/tags/docker/">Docker</a> <a class="post-tag" href="/tags/grafana/">Grafana</a> <a class="post-tag" href="/tags/tdd/">TDD</a> <a class="post-tag" href="/tags/linux/">Linux</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/Kubernetes_monitoring_Prometheus/"><div class="card-body"> <em class="small" data-ts="1658242800" data-df="ll" > Jul 20, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[Monitoring] 쿠버네티스 모니터링 - Prometheus</h3><div class="text-muted small"><p> 1. Prometheus Prometheus는 현재 쿠버네티스 상에서 가장 많이 사용되고 있는 오픈 소스 기반 모니터링 시스템이며, 쿠버네티스 클러스터 및 컨테이너들를 손쉽게 모니터링이 가능합니다. PromQL 쿼리 PromQL 쿼리를 사용하여 외부 API나 프로메테우스 웹콘솔을 이용해 서빙 가능합니다. ...</p></div></div></a></div><div class="card"> <a href="/posts/Kbernetes_install/"><div class="card-body"> <em class="small" data-ts="1658415600" data-df="ll" > Jul 22, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[Kubernetes] Kubernetes install</h3><div class="text-muted small"><p> 관련 Post : Docker install Ubuntu - 20.04 kubernetes : 1.18.8 1. Kubernetes 설치   1.Install Kubernetes curl -s [https://packages.cloud.google.com/apt/doc/apt-key.gpg](https://packages.cloud.g...</p></div></div></a></div><div class="card"> <a href="/posts/Kbernetes_%EC%BB%A8%ED%94%BC%EA%B7%B8%EB%A7%B5%EA%B3%BC_%EC%8B%9C%ED%81%AC%EB%A6%BF/"><div class="card-body"> <em class="small" data-ts="1658934000" data-df="ll" > Jul 28, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[Kubernetes] Kubernetes - 컨피그맵, 시크릿</h3><div class="text-muted small"><p> 참고 Post: Grafana Provisining - ConfigMap 생성 참고: 쿠버네티스 레퍼런스 - 컨피그맵, 쿠버네티스 레퍼런스 - 시크릿, GKE - ConfigMap, GKE - Secret, ORELLY 쿠버네티스 시작하기 1. 컨피그맵(ConfigMap) 과 시크릿(Secret) 컨테이너 이미지는 가능한 한 재사용할 수 있게 ...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/aws-IAM_Identity_and_Access_Management/" class="btn btn-outline-primary" prompt="Older"><p>[AWS] IAM ( Identity and Access Management)</p></a> <a href="/posts/Kbernetes_%EC%BB%A8%ED%94%BC%EA%B7%B8%EB%A7%B5%EA%B3%BC_%EC%8B%9C%ED%81%AC%EB%A6%BF/" class="btn btn-outline-primary" prompt="Newer"><p>[Kubernetes] Kubernetes - 컨피그맵, 시크릿</p></a></div></div></div><footer class="row pl-3 pr-3"><div class="col-12 d-flex justify-content-between align-items-center text-muted pl-0 pr-0"><div class="footer-left"><p class="mb-0"> © 2023 <a href="https://github.com/username"></a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">DonggeulDunggeul rights reserved.</span></p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/java/">Java</a> <a class="post-tag" href="/tags/keycloak/">Keycloak</a> <a class="post-tag" href="/tags/kubernetes/">Kubernetes</a> <a class="post-tag" href="/tags/monitoring/">Monitoring</a> <a class="post-tag" href="/tags/python/">Python</a> <a class="post-tag" href="/tags/aws/">AWS</a> <a class="post-tag" href="/tags/docker/">Docker</a> <a class="post-tag" href="/tags/grafana/">Grafana</a> <a class="post-tag" href="/tags/tdd/">TDD</a> <a class="post-tag" href="/tags/linux/">Linux</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a><div id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-animation="true" data-autohide="false"><div class="toast-header"> <button type="button" class="ml-2 ml-auto close" data-dismiss="toast" aria-label="Close"> <span aria-hidden="true">&times;</span> </button></div><div class="toast-body text-center pt-0"><p class="pl-2 pr-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></div><script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script>
